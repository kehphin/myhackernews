
<h1>Profile for {{username}}</h1>
<button ng-show="currentUser && currentUser.username != username && followers.indexOf(currentUser.username) == -1" ng-click="followUser()" class="btn btn-success">
    <span class="glyphicon glyphicon-plus"></span>
    Follow User
</button>
<button ng-show="currentUser && currentUser.username != username && followers.indexOf(currentUser.username) > -1" ng-click="unfollowUser()" class="btn btn-danger">
    <span class="glyphicon glyphicon-minus"></span>
    Unfollow User
</button>

<ul class="nav nav-tabs">
  <li class="profile-tab followers-tab active">
    <a ng-click="setProfileTabView('followers-tab')" class="sort">Followers ({{followers.length}})</a>
  </li>
  <li class="profile-tab following-tab">
    <a ng-click="setProfileTabView('following-tab')" class="sort">Following ({{following.length}})</a>
  </li>
  <li class="profile-tab favorites-tab">
    <a ng-click="setProfileTabView('favorites-tab')" class="sort">Favorites ({{favorites.length}})</a>
  </li>
</ul>

<div ng-show="tabView == 'following-tab'">
  <h4 ng-show="following.length === 0">{{username}} isn't following anyone.</h4>
    <table ng-show="following.length > 0" class="table table-striped">
        <tbody>
            <tr>
              <th>Username</th>
            </tr>
            <tr ng-repeat="user in following">
              <td>
                <a ng-href="#/profile/{{user}}">{{user}}</a>
              </td>
            </tr>
        </tbody>
    </table>
</div>

<div ng-show="tabView == 'followers-tab'">
  <h4 ng-show="followers.length === 0">No one is following {{username}}.</h4>
  <table ng-show="followers.length > 0" class="table table-striped">
        <tbody>
            <tr>
              <th>Username</th>
            </tr>
            <tr ng-repeat="user in followers">
              <td>
                <a ng-href="#/profile/{{user}}">{{user}}</a>
              </td>
            </tr>
        </tbody>
    </table>
</div>

<div ng-show="tabView == 'favorites-tab'">
    <h3 ng-show="favorites.length == 0">{{username}} hasn't favorited any posts.</h3>
    <table ng-show="favorites.length > 0" class="table table-striped">
        <tbody>
            <tr >
              <th>Title</th>
              <th></th>
              <th>By</th>
              <th></th>
            </tr>
            <tr ng-repeat="story in favorites">
              <td>
              <a ng-href="{{story.url}}">{{story.title}}</a>
              </td>
              <td>
                <div class="commentLink">
                  <a ng-href="#/article/{{story.HNId}}">View Details</a>
                </div>
              </td>
              <td>{{story.author}}</td>
              <td>
                <button ng-show="currentUser && currentUser.username == username" ng-click="removeFavorite(story, $index)" class="btn btn-danger">
                    <span class="glyphicon glyphicon-remove"></span>
                </button>
              </td>
            </tr>
        </tbody>
    </table>
</div>

<div ng-show="currentUser.roles.indexOf('admin') > -1">
  <h1>Admin</h1>
  <h2>User List</h2>
  <table class="table table-striped">
    <tr>
      <td>&nbsp;</td>
      <td><input ng-model="user.username" class="form-control"/></td>
      <td><input ng-model="user.password" class="form-control" type="password"/></td>
      <td><input ng-model="user.firstName" class="form-control"/></td>
      <td><input ng-model="user.lastName" class="form-control"/></td>
      <td><input ng-model="user.email" class="form-control"/></td>
      <td><input ng-model="user.roles" class="form-control"/></td>
      <td><button ng-click="add(user)">&plus;</button>
      <td><button ng-click="update(user)">&check;</button>
    </tr>

    </tr>
    <tr ng-repeat="user in users">
      <td>{{user._id}}</td>
      <td>{{user.username}}</td>
      <td>&nbsp;</td>
      <td>{{user.firstName}}</td>
      <td>{{user.lastName}}</td>
      <td>{{user.email}}</td>
      <td>{{user.roles}}</td>
      <td><button ng-click="remove(user)">X</button>
      <td><button ng-click="select(user)">...</button>
      </tr>
  </table>
</div>

<div>
  <h2>Similar Users</h2>
  <h4 ng-show="similarUsers.length === 0">We can't find any similar users.</h4>
    <table ng-show="similarUsers.length > 0" class="table table-striped">
        <tbody>
            <tr>
              <th>Username</th>
              <th>Favorites In Common</th>
            </tr>
            <tr ng-repeat="user in similarUsers">
              <td>
                <a ng-href="#/profile/{{user.username}}">{{user.username}}</a>
              </td>
              <td>
                {{user.similarFavorites}}
              </td>
            </tr>
        </tbody>
    </table>
</div>